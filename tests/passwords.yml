---
- hosts: localhost
  gather_facts: False

  tasks:
    # # password must be manually set atm
    - name: Retrieve Password with label "dokuwiki"
      debug:
        var: lookup('markuman.nextcloud.passwords', 'dokuwiki')

    - name: password info test also for name/label "dokuwiki"
      markuman.nextcloud.password_info:
        name: dokuwiki
      register: out

    - debug: msg="{{ out }}"

    - name: receive all password
      markuman.nextcloud.password_info:
      register: out

    - debug: msg="{{ out.password | count }}"

    - name: fetch a generated password
      debug:
        var: lookup('markuman.nextcloud.generate_password', 'dokuwiki')
